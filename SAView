@*@model IEnumerable<WF.ERMT.Application.Entities.CustomEntities.PEPEntity>*@
@model WF.ERMT.Application.Entities.CustomEntities.SearchDetailsViewModel
@{
    ViewBag.Title = "PEPDeterminationSearchForm";
    Layout = "~/Views/Shared/layout.cshtml";
    bool issearch= ViewBag.isSearch;
    bool isValidationError = ViewBag.isValidationError;
    string typeofSearch= ViewBag.typeofSearch ;
}

<link href="~/AdminLTE/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
<link href="~/AdminLTE/plugins/ionicons/css/ionicons.css" rel="stylesheet" />
<link href="~/AdminLTE/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/AdminLTE/dist/css/admin-lte.min.css" rel="stylesheet" />
<link href="~/AdminLTE/dist/css/skins/_all-skins.min.css" rel="stylesheet" />
@*<link href="~/AdminLTE/bootstrap/css/bootstrap.min.css" rel="stylesheet" />*@

<script src="~/AdminLTE/plugins/datatables/js/jquery.dataTables.min.js"></script>
<script src="~/AdminLTE/plugins/datatables/js/dataTables.bootstrap.min.js"></script>


@*<link href="http://solutions.entshpt.wellsfargo.net/sites/TAPE/Style Library/Optional.SharePoint2013.Branding/Styles/Core.css" rel="stylesheet" type="text/css" />*@



 
        <div class="container-fluid">
            <div class="row">
                @*<div class="col-lg-2 col-md-2">*@
              <div style="float:left;">
                    @Html.Partial("PEPLeftMenu")
                </div>
                <div class="col-lg-9 col-md-9">
                    <h4 class="ms-core-pageTitle"></h4>
                    <br />
                    <form action='@Url.Action("PEPDeterminationSearchFormDetails", "PEPDetails")' method="post">
                        <div class="panel panel-default panel-group">
                            <div class="panel-heading">
                                <div class="panel-title"><b>SubAccount Search Screen</b></div>
                            </div>
                            <div class="panel-body">
                                <div class="row" style="padding-bottom:10px;">
                                    <div class="form-group">
                                        <div class="col-xs-2">
                                            <label for="PepID" class="control-label">Requested By</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-sm input-normal" id="pepid" name="pepid" value='@if (Model.SearchCriteria.pepid == 0) { } else {@Model.SearchCriteria.pepid }' />
                                        </div>
                                        <div class="col-xs-2">
                                            <label for="entityid" class="control-label">Requested Number</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-sm input-normal" id="entityid" name="entity" value="@Model.SearchCriteria.entity" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom:10px;">
                                    <div class="form-group">
                                        <div class="col-xs-2">
                                            <label for="ecnid" class="control-label">Requested Date</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="ecnid" name="ecn" value="@Model.SearchCriteria.ecn" />
                                        </div>
                                        <div class="col-xs-2">
                                            <label for="primarypepid" class="control-label">Master Account Name</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="primarypepid" name="primarypep" value="@Model.SearchCriteria.primarypep" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom:10px;">
                                    <div class="form-group">
                                        <div class="col-xs-2">
                                            <label for="customernameid" class="control-label">Master Account TIN</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="customernameid" name="customername" value="@Model.SearchCriteria.customername" />
                                        </div>
                                        <div class="col-xs-2">
                                            <label for="wcisid" class="control-label" style="display:block;font-weight:normal;background-color:White;color:Black;font-size:90%">WCIS #</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="wcisid" name="wcis" />
                                            <input type="hidden" class="form-control input-normal input-sm" id="wcisid" name="typeofSearch" value="@Model.SearchCriteria.typeofSearch" />
                                        </div>
                                    </div>
                                </div>

                                 <div class="row" style="padding-bottom:10px;">
                                    <div class="form-group">
                                        <div class="col-xs-2">
                                            <label for="customernameid" class="control-label">Agent TIN EIN</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="customernameid" name="customername" value="@Model.SearchCriteria.customername" />
                                        </div>
                                        <div class="col-xs-2">
                                            <label for="customernameid" class="control-label">SubAccount Legal Name</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="customernameid" name="customername" value="@Model.SearchCriteria.customername" />
                                        </div>
                                           <div class="col-xs-2">
                                            <label for="customernameid" class="control-label">SubAccount Number</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="customernameid" name="customername" value="@Model.SearchCriteria.customername" />
                                        </div>

                                     </div>
                                          <div class="col-xs-2">
                                            <label for="customernameid" class="control-label">SubAccount CaseID</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <input type="text" class="form-control input-normal input-sm" id="wcisid" name="wcis" />
                                            <input type="hidden" class="form-control input-normal input-sm" id="wcisid" name="typeofSearch" value="@Model.SearchCriteria.typeofSearch" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom:10px;">
                                    <div class="form-group">
                                        <div class="col-xs-2">
                                            <label for="filter" class="control-label">Filter</label>
                                        </div>
                                        <div class="col-xs-4">
                                            @Html.DropDownList("filter", new List<SelectListItem>
            {
                                new SelectListItem() {Text = "Exact Match", Value="ExactMatch"},
                                new SelectListItem() {Text = "Contains", Value="Contains", Selected=true},
                                new SelectListItem() {Text = "Starts With", Value="StartsWith"},
                                new SelectListItem() {Text = "Ends With", Value="EndsWith"}

            }, new { @class = "form-control", name = "filter"})
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="margin:10px">
                                <div class="row" align="right" style="padding-right:20px;">
                                    <input type="submit" class="btn btn-primary" style="padding-right:10px;padding-left:10px" id="SearchPEP" value="Search" />
                                    <span>&nbsp;&nbsp;&nbsp;</span>
                                    <input type="button" class="btn btn-primary" style="padding-right:10px;padding-left:10px;" id="homeForm" value="Cancel" />
                                </div>
                            </div>
                        </div>
                    </form>


                    @if (Model != null)
                    {
                        if (issearch)
                        {
                            if (Model.SearchResult.PepList.Count() > 0)
                            {

                                <br />
                                <div id="nav" style="float:right;font-family:Verdana;padding-right:19px"></div>
                                <div class="col-lg-2" style="width: 100%;font-family:Verdana">

                                    @Html.Partial("_DisplayPepInformationList", Model.SearchResult, new ViewDataDictionary { { "id", "1" } })

                                </div>
                            }

                            else
                            {
                                <div class="col-lg-4">
                                    @Html.ValidationMessage("Error")
                                    @Html.ActionLink("Create New PEP Request", "PEPDeterminationForm", "PEPDetails", new { @class = "blueunderlinedlink" })<br />
                                </div>
                            }
                        }
                    }

                    @if (isValidationError)
                    {
                        <div class="col-lg-4">
                            @Html.ValidationMessage("ValidationError", new { style = "font-size:14px; color:red" })
                        </div>

                    }
                </div>
                <div class="col-lg-1 col-md-1"></div>
             </div>
</div>
<script type="text/javascript">

//      $("tr.myTable").click(function () {
//         
//          var tableData = $(this).children("td").map(function () {
//              return $(this).text();
//          }).get();

//          console.log(tableData);
//      });

    $(document).ready(function () {

        //       $("#myTable").tablesorter({
        //        sortList: [[0,0]],
        //        headers: {3:{sorter:false}} 

        //        $("#myTable td:nth-child(1)").click(function (event) {
        //            event.preventDefault();
        //            var $td = $(this).closest('tr').children('td');
        //            var pepid = $td.eq(0).text().toString().trim();

        //            // var pepid = $(this).data('id');
        //            var url = "/PEPDetails/GetPEPDeterminationForm?pepid=" + pepid;
        //            window.location.href = url;

        //        });




//        $('#myTable').after('<div id="nav" style="float:right"></div>');
//        $('#myTable').before('<div id="nav1" style="float:right"></div>');
        //var rowsShown = 10;
        //var rowsTotal = $('#myTable tbody tr').length;
        //if (rowsTotal > 10) {
        //    var numPages = rowsTotal / rowsShown;
        //    for (i = 0; i < numPages; i++) {
        //        var pageNum = i + 1;
        //        $('#nav').append('<a href="#" rel="' + i + '">' + pageNum + '</a> ');
        //        $('#nav1').append('<a href="#" rel="' + i + '">' + pageNum + '</a> ');
        //    }
        //    $('#myTable tbody tr').hide();
        //    $('#myTable tbody tr').slice(0, rowsShown).show();
        //    $('#nav a:first').addClass('active');
        //    $('#nav1 a:first').addClass('active');
        //    $('#nav a').bind('click', function () {

        //        $('#nav a').removeClass('active');
        //        $(this).addClass('active');
        //        var currPage = $(this).attr('rel');
        //        var startItem = currPage * rowsShown;
        //        var endItem = startItem + rowsShown;
        //        $('#myTable tbody tr').css('opacity', '0.0').hide().slice(startItem, endItem).
        //                css('display', 'table-row').animate({ opacity: 1 }, 300);

        //    });

        //    $('#nav1 a').bind('click', function () {

        //        $('#nav1 a').removeClass('active');
        //        $(this).addClass('active');
        //        var currPage = $(this).attr('rel');
        //        var startItem = currPage * rowsShown;
        //        var endItem = startItem + rowsShown;
        //        $('#myTable tbody tr').css('opacity', '0.0').hide().slice(startItem, endItem).
        //                css('display', 'table-row').animate({ opacity: 1 }, 300);

        //    });
        //}



    });

    //function GetPEPDeterminationForm(e) {
    //    event.preventDefault();

    //    //var $td = $(this).closest('tr').children('td');
    //    //var pepid = $td.eq(0).text();
    //    var pepid = e.innerHTML.toString().trim();

    //    var url = window.rootUrl + "PEPDetails/GetPEPDeterminationForm?pepid=" + pepid;
    //    window.location.href = url;
    //}

    $("#homeForm").on("click", function (ev) {
        ev.preventDefault();
        window.location.href = window.rootUrl + "PEPDetails/LOBDasboardPage";

    });

    
</script>
